"use client";
"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.default = LoginPage;
const react_1 = require("react");
const navigation_1 = require("next/navigation");
const card_1 = require("@/components/ui/card");
const button_1 = require("@/components/ui/button");
const alert_1 = require("@/components/ui/alert");
const lucide_react_1 = require("lucide-react");
const auth_1 = require("@/lib/auth");
const api_client_1 = require("@/lib/api-client");
function LoginForm() {
    const router = (0, navigation_1.useRouter)();
    const searchParams = (0, navigation_1.useSearchParams)();
    const [email, setEmail] = (0, react_1.useState)("admin@example.com");
    const [password, setPassword] = (0, react_1.useState)("TestPassword123!");
    const [isLoading, setIsLoading] = (0, react_1.useState)(false);
    const [error, setError] = (0, react_1.useState)(null);
    const handleLogin = async (e) => {
        e.preventDefault();
        setError(null);
        setIsLoading(true);
        try {
            const result = await (0, auth_1.login)(email, password);
            if (result.success && result.token) {
                // Save token to both localStorage and cookies
                api_client_1.apiClient.setToken(result.token);
                if (result.userInfo) {
                    (0, auth_1.saveUserInfo)(result.userInfo);
                }
                // Save token to cookies for middleware
                document.cookie = `auth_token=${result.token}; path=/; max-age=${7 * 24 * 60 * 60}`; // 7 days
                // Get callback URL from query params
                const callbackUrl = searchParams.get('callbackUrl') || '/dashboard';
                // Redirect to callback URL or dashboard
                router.push(callbackUrl);
            }
            else {
                setError(result.error || "Login failed");
            }
        }
        catch (err) {
            setError("An unexpected error occurred");
            console.error(err);
        }
        finally {
            setIsLoading(false);
        }
    };
    return (<div className="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-6">
      <card_1.Card className="w-full max-w-md">
        <card_1.CardHeader className="text-center">
          <card_1.CardTitle className="text-3xl font-bold">Overlay Platform</card_1.CardTitle>
          <card_1.CardDescription>Sign in to access AI document analysis</card_1.CardDescription>
        </card_1.CardHeader>
        <card_1.CardContent>
          <form onSubmit={handleLogin} className="space-y-4">
            {error && (<alert_1.Alert variant="destructive">
                <alert_1.AlertDescription>{error}</alert_1.AlertDescription>
              </alert_1.Alert>)}

            <div className="space-y-2">
              <label htmlFor="email" className="text-sm font-medium text-slate-700 dark:text-slate-300">
                Email
              </label>
              <input id="email" type="email" value={email} onChange={(e) => setEmail(e.target.value)} className="w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="admin@example.com" required disabled={isLoading}/>
            </div>

            <div className="space-y-2">
              <label htmlFor="password" className="text-sm font-medium text-slate-700 dark:text-slate-300">
                Password
              </label>
              <input id="password" type="password" value={password} onChange={(e) => setPassword(e.target.value)} className="w-full px-3 py-2 border border-slate-300 dark:border-slate-600 rounded-md bg-white dark:bg-slate-800 text-slate-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500" placeholder="Enter your password" required disabled={isLoading}/>
            </div>

            <button_1.Button type="submit" className="w-full" disabled={isLoading}>
              {isLoading ? (<>
                  <lucide_react_1.Loader2 className="mr-2 h-4 w-4 animate-spin"/>
                  Signing in...
                </>) : (<>
                  <lucide_react_1.LogIn className="mr-2 h-4 w-4"/>
                  Sign In
                </>)}
            </button_1.Button>
          </form>

          <div className="mt-6 p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
            <p className="text-xs font-semibold text-blue-900 dark:text-blue-100 mb-2">Test Credentials:</p>
            <p className="text-xs text-blue-800 dark:text-blue-200">Email: admin@example.com</p>
            <p className="text-xs text-blue-800 dark:text-blue-200">Password: TestPassword123!</p>
          </div>
        </card_1.CardContent>
      </card_1.Card>
    </div>);
}
function LoginPage() {
    return (<react_1.Suspense fallback={<div className="min-h-screen bg-gradient-to-b from-slate-50 to-slate-100 dark:from-slate-900 dark:to-slate-800 flex items-center justify-center p-6">
        <card_1.Card className="w-full max-w-md">
          <card_1.CardContent className="py-12 text-center">
            <lucide_react_1.Loader2 className="h-8 w-8 animate-spin mx-auto text-slate-400"/>
          </card_1.CardContent>
        </card_1.Card>
      </div>}>
      <LoginForm />
    </react_1.Suspense>);
}
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicGFnZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbInBhZ2UudHN4Il0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLFlBQVksQ0FBQzs7O0FBOEhiLDRCQWNDO0FBMUlELGlDQUEyQztBQUMzQyxnREFBNkQ7QUFDN0QsK0NBQWlHO0FBQ2pHLG1EQUFnRDtBQUNoRCxpREFBZ0U7QUFDaEUsK0NBQThDO0FBQzlDLHFDQUFpRDtBQUNqRCxpREFBNkM7QUFFN0MsU0FBUyxTQUFTO0lBQ2hCLE1BQU0sTUFBTSxHQUFHLElBQUEsc0JBQVMsR0FBRSxDQUFDO0lBQzNCLE1BQU0sWUFBWSxHQUFHLElBQUEsNEJBQWUsR0FBRSxDQUFDO0lBQ3ZDLE1BQU0sQ0FBQyxLQUFLLEVBQUUsUUFBUSxDQUFDLEdBQUcsSUFBQSxnQkFBUSxFQUFDLG1CQUFtQixDQUFDLENBQUM7SUFDeEQsTUFBTSxDQUFDLFFBQVEsRUFBRSxXQUFXLENBQUMsR0FBRyxJQUFBLGdCQUFRLEVBQUMsa0JBQWtCLENBQUMsQ0FBQztJQUM3RCxNQUFNLENBQUMsU0FBUyxFQUFFLFlBQVksQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBQyxLQUFLLENBQUMsQ0FBQztJQUNsRCxNQUFNLENBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxHQUFHLElBQUEsZ0JBQVEsRUFBZ0IsSUFBSSxDQUFDLENBQUM7SUFFeEQsTUFBTSxXQUFXLEdBQUcsS0FBSyxFQUFFLENBQWtCLEVBQUUsRUFBRTtRQUMvQyxDQUFDLENBQUMsY0FBYyxFQUFFLENBQUM7UUFDbkIsUUFBUSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ2YsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBRW5CLElBQUksQ0FBQztZQUNILE1BQU0sTUFBTSxHQUFHLE1BQU0sSUFBQSxZQUFLLEVBQUMsS0FBSyxFQUFFLFFBQVEsQ0FBQyxDQUFDO1lBRTVDLElBQUksTUFBTSxDQUFDLE9BQU8sSUFBSSxNQUFNLENBQUMsS0FBSyxFQUFFLENBQUM7Z0JBQ25D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LFNBQVM7SUFDL0IsT0FBTyxDQUNMLENBQUMsZ0JBQVEsQ0FBQyxRQUFRLENBQUMsQ0FDakIsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLHFJQUFxSSxDQUNsSjtRQUFBLENBQUMsV0FBSSxDQUFDLFNBQVMsQ0FBQyxpQkFBaUIsQ0FDL0I7VUFBQSxDQUFDLGtCQUFXLENBQUMsU0FBUyxDQUFDLG1CQUFtQixDQUN4QztZQUFBLENBQUMsc0JBQU8sQ0FBQyxTQUFTLENBQUMsNkNBQTZDLEVBQ2xFO1VBQUEsRUFBRSxrQkFBVyxDQUNmO1FBQUEsRUFBRSxXQUFJLENBQ1I7TUFBQSxFQUFFLEdBQUcsQ0FDUCxDQUFDLENBQ0M7TUFBQSxDQUFDLFNBQVMsQ0FBQyxBQUFELEVBQ1o7SUFBQSxFQUFFLGdCQUFRLENBQUMsQ0FDWixDQUFDO0FBQ0osQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIlwidXNlIGNsaWVudFwiO1xuXG5pbXBvcnQgeyB1c2VTdGF0ZSwgU3VzcGVuc2UgfSBmcm9tIFwicmVhY3RcIjtcbmltcG9ydCB7IHVzZVJvdXRlciwgdXNlU2VhcmNoUGFyYW1zIH0gZnJvbSBcIm5leHQvbmF2aWdhdGlvblwiO1xuaW1wb3J0IHsgQ2FyZCwgQ2FyZENvbnRlbnQsIENhcmREZXNjcmlwdGlvbiwgQ2FyZEhlYWRlciwgQ2FyZFRpdGxlIH0gZnJvbSBcIkAvY29tcG9uZW50cy91aS9jYXJkXCI7XG5pbXBvcnQgeyBCdXR0b24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2J1dHRvblwiO1xuaW1wb3J0IHsgQWxlcnQsIEFsZXJ0RGVzY3JpcHRpb24gfSBmcm9tIFwiQC9jb21wb25lbnRzL3VpL2FsZXJ0XCI7XG5pbXBvcnQgeyBMb2dJbiwgTG9hZGVyMiB9IGZyb20gXCJsdWNpZGUtcmVhY3RcIjtcbmltcG9ydCB7IGxvZ2luLCBzYXZlVXNlckluZm8gfSBmcm9tIFwiQC9saWIvYXV0aFwiO1xuaW1wb3J0IHsgYXBpQ2xpZW50IH0gZnJvbSBcIkAvbGliL2FwaS1jbGllbnRcIjtcblxuZnVuY3Rpb24gTG9naW5Gb3JtKCkge1xuICBjb25zdCByb3V0ZXIgPSB1c2VSb3V0ZXIoKTtcbiAgY29uc3Qgc2VhcmNoUGFyYW1zID0gdXNlU2VhcmNoUGFyYW1zKCk7XG4gIGNvbnN0IFtlbWFpbCwgc2V0RW1haWxdID0gdXNlU3RhdGUoXCJhZG1pbkBleGFtcGxlLmNvbVwiKTtcbiAgY29uc3QgW3Bhc3N3b3JkLCBzZXRQYXNzd29yZF0gPSB1c2VTdGF0ZShcIlRlc3RQYXNzd29yZDEyMyFcIik7XG4gIGNvbnN0IFtpc0xvYWRpbmcsIHNldElzTG9hZGluZ10gPSB1c2VTdGF0ZShmYWxzZSk7XG4gIGNvbnN0IFtlcnJvciwgc2V0RXJyb3JdID0gdXNlU3RhdGU8c3RyaW5nIHwgbnVsbD4obnVsbCk7XG5cbiAgY29uc3QgaGFuZGxlTG9naW4gPSBhc3luYyAoZTogUmVhY3QuRm9ybUV2ZW50KSA9PiB7XG4gICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIHNldEVycm9yKG51bGwpO1xuICAgIHNldElzTG9hZGluZyh0cnVlKTtcblxuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBsb2dpbihlbWFpbCwgcGFzc3dvcmQpO1xuXG4gICAgICBpZiAocmVzdWx0LnN1Y2Nlc3MgJiYgcmVzdWx0LnRva2VuKSB7XG4gICAgICAgIC8vIFNhdmUgdG9rZW4gdG8gYm90aCBsb2NhbFN0b3JhZ2UgYW5kIGNvb2tpZXNcbiAgICAgICAgYXBpQ2xpZW50LnNldFRva2VuKHJlc3VsdC50b2tlbik7XG4gICAgICAgIGlmIChyZXN1bHQudXNlckluZm8pIHtcbiAgICAgICAgICBzYXZlVXNlckluZm8ocmVzdWx0LnVzZXJJbmZvKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFNhdmUgdG9rZW4gdG8gY29va2llcyBmb3IgbWlkZGxld2FyZVxuICAgICAgICBkb2N1bWVudC5jb29raWUgPSBgYXV0aF90b2tlbj0ke3Jlc3VsdC50b2tlbn07IHBhdGg9LzsgbWF4LWFnZT0kezcgKiAyNCAqIDYwICogNjB9YDsgLy8gNyBkYXlzXG5cbiAgICAgICAgLy8gR2V0IGNhbGxiYWNrIFVSTCBmcm9tIHF1ZXJ5IHBhcmFtc1xuICAgICAgICBjb25zdCBjYWxsYmFja1VybCA9IHNlYXJjaFBhcmFtcy5nZXQoJ2NhbGxiYWNrVXJsJykgfHwgJy9kYXNoYm9hcmQnO1xuXG4gICAgICAgIC8vIFJlZGlyZWN0IHRvIGNhbGxiYWNrIFVSTCBvciBkYXNoYm9hcmRcbiAgICAgICAgcm91dGVyLnB1c2goY2FsbGJhY2tVcmwpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgc2V0RXJyb3IocmVzdWx0LmVycm9yIHx8IFwiTG9naW4gZmFpbGVkXCIpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycikge1xuICAgICAgc2V0RXJyb3IoXCJBbiB1bmV4cGVjdGVkIGVycm9yIG9jY3VycmVkXCIpO1xuICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgIH0gZmluYWxseSB7XG4gICAgICBzZXRJc0xvYWRpbmcoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYWRpZW50LXRvLWIgZnJvbS1zbGF0ZS01MCB0by1zbGF0ZS0xMDAgZGFyazpmcm9tLXNsYXRlLTkwMCBkYXJrOnRvLXNsYXRlLTgwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTZcIj5cbiAgICAgIDxDYXJkIGNsYXNzTmFtZT1cInctZnVsbCBtYXgtdy1tZFwiPlxuICAgICAgICA8Q2FyZEhlYWRlciBjbGFzc05hbWU9XCJ0ZXh0LWNlbnRlclwiPlxuICAgICAgICAgIDxDYXJkVGl0bGUgY2xhc3NOYW1lPVwidGV4dC0zeGwgZm9udC1ib2xkXCI+T3ZlcmxheSBQbGF0Zm9ybTwvQ2FyZFRpdGxlPlxuICAgICAgICAgIDxDYXJkRGVzY3JpcHRpb24+U2lnbiBpbiB0byBhY2Nlc3MgQUkgZG9jdW1lbnQgYW5hbHlzaXM8L0NhcmREZXNjcmlwdGlvbj5cbiAgICAgICAgPC9DYXJkSGVhZGVyPlxuICAgICAgICA8Q2FyZENvbnRlbnQ+XG4gICAgICAgICAgPGZvcm0gb25TdWJtaXQ9e2hhbmRsZUxvZ2lufSBjbGFzc05hbWU9XCJzcGFjZS15LTRcIj5cbiAgICAgICAgICAgIHtlcnJvciAmJiAoXG4gICAgICAgICAgICAgIDxBbGVydCB2YXJpYW50PVwiZGVzdHJ1Y3RpdmVcIj5cbiAgICAgICAgICAgICAgICA8QWxlcnREZXNjcmlwdGlvbj57ZXJyb3J9PC9BbGVydERlc2NyaXB0aW9uPlxuICAgICAgICAgICAgICA8L0FsZXJ0PlxuICAgICAgICAgICAgKX1cblxuICAgICAgICAgICAgPGRpdiBjbGFzc05hbWU9XCJzcGFjZS15LTJcIj5cbiAgICAgICAgICAgICAgPGxhYmVsIGh0bWxGb3I9XCJlbWFpbFwiIGNsYXNzTmFtZT1cInRleHQtc20gZm9udC1tZWRpdW0gdGV4dC1zbGF0ZS03MDAgZGFyazp0ZXh0LXNsYXRlLTMwMFwiPlxuICAgICAgICAgICAgICAgIEVtYWlsXG4gICAgICAgICAgICAgIDwvbGFiZWw+XG4gICAgICAgICAgICAgIDxpbnB1dFxuICAgICAgICAgICAgICAgIGlkPVwiZW1haWxcIlxuICAgICAgICAgICAgICAgIHR5cGU9XCJlbWFpbFwiXG4gICAgICAgICAgICAgICAgdmFsdWU9e2VtYWlsfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoZSkgPT4gc2V0RW1haWwoZS50YXJnZXQudmFsdWUpfVxuICAgICAgICAgICAgICAgIGNsYXNzTmFtZT1cInctZnVsbCBweC0zIHB5LTIgYm9yZGVyIGJvcmRlci1zbGF0ZS0zMDAgZGFyazpib3JkZXItc2xhdGUtNjAwIHJvdW5kZWQtbWQgYmctd2hpdGUgZGFyazpiZy1zbGF0ZS04MDAgdGV4dC1zbGF0ZS05MDAgZGFyazp0ZXh0LXNsYXRlLTEwMCBmb2N1czpvdXRsaW5lLW5vbmUgZm9jdXM6cmluZy0yIGZvY3VzOnJpbmctYmx1ZS01MDBcIlxuICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyPVwiYWRtaW5AZXhhbXBsZS5jb21cIlxuICAgICAgICAgICAgICAgIHJlcXVpcmVkXG4gICAgICAgICAgICAgICAgZGlzYWJsZWQ9e2lzTG9hZGluZ31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgIDwvZGl2PlxuXG4gICAgICAgICAgICA8ZGl2IGNsYXNzTmFtZT1cInNwYWNlLXktMlwiPlxuICAgICAgICAgICAgICA8bGFiZWwgaHRtbEZvcj1cInBhc3N3b3JkXCIgY2xhc3NOYW1lPVwidGV4dC1zbSBmb250LW1lZGl1bSB0ZXh0LXNsYXRlLTcwMCBkYXJrOnRleHQtc2xhdGUtMzAwXCI+XG4gICAgICAgICAgICAgICAgUGFzc3dvcmRcbiAgICAgICAgICAgICAgPC9sYWJlbD5cbiAgICAgICAgICAgICAgPGlucHV0XG4gICAgICAgICAgICAgICAgaWQ9XCJwYXNzd29yZFwiXG4gICAgICAgICAgICAgICAgdHlwZT1cInBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICB2YWx1ZT17cGFzc3dvcmR9XG4gICAgICAgICAgICAgICAgb25DaGFuZ2U9eyhlKSA9PiBzZXRQYXNzd29yZChlLnRhcmdldC52YWx1ZSl9XG4gICAgICAgICAgICAgICAgY2xhc3NOYW1lPVwidy1mdWxsIHB4LTMgcHktMiBib3JkZXIgYm9yZGVyLXNsYXRlLTMwMCBkYXJrOmJvcmRlci1zbGF0ZS02MDAgcm91bmRlZC1tZCBiZy13aGl0ZSBkYXJrOmJnLXNsYXRlLTgwMCB0ZXh0LXNsYXRlLTkwMCBkYXJrOnRleHQtc2xhdGUtMTAwIGZvY3VzOm91dGxpbmUtbm9uZSBmb2N1czpyaW5nLTIgZm9jdXM6cmluZy1ibHVlLTUwMFwiXG4gICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI9XCJFbnRlciB5b3VyIHBhc3N3b3JkXCJcbiAgICAgICAgICAgICAgICByZXF1aXJlZFxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtpc0xvYWRpbmd9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L2Rpdj5cblxuICAgICAgICAgICAgPEJ1dHRvbiB0eXBlPVwic3VibWl0XCIgY2xhc3NOYW1lPVwidy1mdWxsXCIgZGlzYWJsZWQ9e2lzTG9hZGluZ30+XG4gICAgICAgICAgICAgIHtpc0xvYWRpbmcgPyAoXG4gICAgICAgICAgICAgICAgPD5cbiAgICAgICAgICAgICAgICAgIDxMb2FkZXIyIGNsYXNzTmFtZT1cIm1yLTIgaC00IHctNCBhbmltYXRlLXNwaW5cIiAvPlxuICAgICAgICAgICAgICAgICAgU2lnbmluZyBpbi4uLlxuICAgICAgICAgICAgICAgIDwvPlxuICAgICAgICAgICAgICApIDogKFxuICAgICAgICAgICAgICAgIDw+XG4gICAgICAgICAgICAgICAgICA8TG9nSW4gY2xhc3NOYW1lPVwibXItMiBoLTQgdy00XCIgLz5cbiAgICAgICAgICAgICAgICAgIFNpZ24gSW5cbiAgICAgICAgICAgICAgICA8Lz5cbiAgICAgICAgICAgICAgKX1cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgIDwvZm9ybT5cblxuICAgICAgICAgIDxkaXYgY2xhc3NOYW1lPVwibXQtNiBwLTQgYmctYmx1ZS01MCBkYXJrOmJnLWJsdWUtOTAwLzIwIHJvdW5kZWQtbGdcIj5cbiAgICAgICAgICAgIDxwIGNsYXNzTmFtZT1cInRleHQteHMgZm9udC1zZW1pYm9sZCB0ZXh0LWJsdWUtOTAwIGRhcms6dGV4dC1ibHVlLTEwMCBtYi0yXCI+VGVzdCBDcmVkZW50aWFsczo8L3A+XG4gICAgICAgICAgICA8cCBjbGFzc05hbWU9XCJ0ZXh0LXhzIHRleHQtYmx1ZS04MDAgZGFyazp0ZXh0LWJsdWUtMjAwXCI+RW1haWw6IGFkbWluQGV4YW1wbGUuY29tPC9wPlxuICAgICAgICAgICAgPHAgY2xhc3NOYW1lPVwidGV4dC14cyB0ZXh0LWJsdWUtODAwIGRhcms6dGV4dC1ibHVlLTIwMFwiPlBhc3N3b3JkOiBUZXN0UGFzc3dvcmQxMjMhPC9wPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgPC9DYXJkPlxuICAgIDwvZGl2PlxuICApO1xufVxuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBMb2dpblBhZ2UoKSB7XG4gIHJldHVybiAoXG4gICAgPFN1c3BlbnNlIGZhbGxiYWNrPXtcbiAgICAgIDxkaXYgY2xhc3NOYW1lPVwibWluLWgtc2NyZWVuIGJnLWdyYWRpZW50LXRvLWIgZnJvbS1zbGF0ZS01MCB0by1zbGF0ZS0xMDAgZGFyazpmcm9tLXNsYXRlLTkwMCBkYXJrOnRvLXNsYXRlLTgwMCBmbGV4IGl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNlbnRlciBwLTZcIj5cbiAgICAgICAgPENhcmQgY2xhc3NOYW1lPVwidy1mdWxsIG1heC13LW1kXCI+XG4gICAgICAgICAgPENhcmRDb250ZW50IGNsYXNzTmFtZT1cInB5LTEyIHRleHQtY2VudGVyXCI+XG4gICAgICAgICAgICA8TG9hZGVyMiBjbGFzc05hbWU9XCJoLTggdy04IGFuaW1hdGUtc3BpbiBteC1hdXRvIHRleHQtc2xhdGUtNDAwXCIgLz5cbiAgICAgICAgICA8L0NhcmRDb250ZW50PlxuICAgICAgICA8L0NhcmQ+XG4gICAgICA8L2Rpdj5cbiAgICB9PlxuICAgICAgPExvZ2luRm9ybSAvPlxuICAgIDwvU3VzcGVuc2U+XG4gICk7XG59XG4iXX0=